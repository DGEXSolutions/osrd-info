{"title": "RollingStock", "description": "Electrical profiles and power classes are used to model the power loss along a catenary:\n* Rolling stocks are attributed a power class depending on their power usage.\n* Electrical profiles are then computed for each power class along all catenaries.\nThe electrical profile's value along the catenary is akin to an \"actual available power\" value.\n* Then, speed-effort curves can be computed for all electrical profile values.\n\nTo prevent power grid overloads, infrastructure managers can enforce power restrictions on some parts of their\ninfrastructure for some trains. These train-specific restrictions are given a code.\nTo respect the prescribed power restrictions, the driver has to change the power notch used in the train, which\nchanges the power consumption of the train, akin to a car's gear.\nIn our model, we consider that trains' power notches and the associated power restriction codes are equivalent.\nThus power restrictions affect the effort curves, and change the power class of the rolling stock.", "type": "object", "properties": {"version": {"title": "Version", "default": "3.2", "enum": ["3.2"], "type": "string"}, "name": {"title": "Name", "maxLength": 255, "type": "string"}, "locked": {"title": "Locked", "description": "Whether the rolling stock can be edited/deleted or not", "default": false, "type": "boolean"}, "effort_curves": {"title": "Effort Curves", "description": "Curves mapping speed (in m/s) to maximum traction (in newtons)", "allOf": [{"$ref": "#/definitions/EffortCurves"}]}, "base_power_class": {"title": "Base Power Class", "description": "The power usage class of the train (optional because it is specific to SNCF)", "type": "string"}, "power_restrictions": {"title": "Power Restrictions", "description": "Mapping from train's power restriction codes to power classes", "allOf": [{"$ref": "#/definitions/PowerRestrictions"}]}, "length": {"title": "Length", "description": "The length of the train, in m", "exclusiveMinimum": 0, "type": "number"}, "max_speed": {"title": "Max Speed", "description": "Maximum speed in m/s", "exclusiveMinimum": 0, "type": "number"}, "startup_time": {"title": "Startup Time", "description": "The time the train takes before it can start accelerating in s", "minimum": 0, "type": "number"}, "startup_acceleration": {"title": "Startup Acceleration", "description": "The maximum acceleration during startup in m/s^2", "minimum": 0, "type": "number"}, "comfort_acceleration": {"title": "Comfort Acceleration", "description": "The maximum operational acceleration in m/s^2", "exclusiveMinimum": 0, "type": "number"}, "gamma": {"title": "Gamma", "description": "The max or const braking coefficient in m/s^2", "allOf": [{"$ref": "#/definitions/Gamma"}]}, "inertia_coefficient": {"title": "Inertia Coefficient", "exclusiveMinimum": 0, "type": "number"}, "features": {"title": "Features", "description": "A list of features the train exhibits", "type": "array", "items": {"type": "string", "maxLength": 255}}, "mass": {"title": "Mass", "description": "The mass of the train, in kg", "exclusiveMinimum": 0, "type": "number"}, "rolling_resistance": {"title": "Rolling Resistance", "description": "The formula to use to compute rolling resistance", "allOf": [{"$ref": "#/definitions/RollingResistance"}]}, "loading_gauge": {"$ref": "#/definitions/LoadingGaugeType"}, "metadata": {"title": "Metadata", "description": "Properties used in the frontend to display the rolling stock", "type": "object", "additionalProperties": {"type": "string"}}, "energy_sources": {"title": "Energy Sources", "type": "array", "items": {"$ref": "#/definitions/EnergySource"}}, "electrical_power_startup_time": {"title": "Electrical Power Startup Time", "description": "The time the train takes before actually using electrical power (in s). Is null if the train is not electric.", "minimum": 0, "type": "number"}, "raise_pantograph_time": {"title": "Raise Pantograph Time", "description": "The time it takes to raise this train's pantograph in s. Is null if the train is not electric.", "minimum": 0, "type": "number"}}, "required": ["name", "effort_curves", "length", "max_speed", "startup_time", "startup_acceleration", "comfort_acceleration", "gamma", "inertia_coefficient", "features", "mass", "rolling_resistance", "loading_gauge", "metadata"], "additionalProperties": false, "definitions": {"ComfortType": {"title": "ComfortType", "description": "This enum defines the comfort type that can take a train.", "enum": ["STANDARD", "AC", "HEATING"], "type": "string"}, "EffortCurveConditions": {"title": "EffortCurveConditions", "type": "object", "properties": {"comfort": {"$ref": "#/definitions/ComfortType"}, "electrical_profile_level": {"title": "Electrical Profile Level", "type": "string"}, "power_restriction_code": {"title": "Power Restriction Code", "type": "string"}}, "additionalProperties": false}, "EffortCurve": {"title": "EffortCurve", "type": "object", "properties": {"speeds": {"title": "Speeds", "description": "Curves mapping speed (in m/s) to maximum traction (in newtons)", "minItems": 2, "type": "array", "items": {"type": "number", "minimum": 0}}, "max_efforts": {"title": "Max Efforts", "minItems": 2, "type": "array", "items": {"type": "number", "minimum": 0}}}, "required": ["speeds", "max_efforts"], "additionalProperties": false}, "ConditionalEffortCurve": {"title": "ConditionalEffortCurve", "description": "Effort curve subject to application conditions", "type": "object", "properties": {"cond": {"title": "Cond", "default": {"comfort": null, "electrical_profile_level": null, "power_restriction_code": null}, "allOf": [{"$ref": "#/definitions/EffortCurveConditions"}]}, "curve": {"title": "Curve", "description": "Effort curve to apply if the conditions are met", "allOf": [{"$ref": "#/definitions/EffortCurve"}]}}, "required": ["curve"], "additionalProperties": false}, "ModeEffortCurves": {"title": "ModeEffortCurves", "description": "Effort curves for a given mode", "type": "object", "properties": {"curves": {"title": "Curves", "description": "List of conditional effort curves, sorted by match priority", "type": "array", "items": {"$ref": "#/definitions/ConditionalEffortCurve"}}, "default_curve": {"title": "Default Curve", "description": "Curve used if no condition is met", "allOf": [{"$ref": "#/definitions/EffortCurve"}]}, "is_electric": {"title": "Is Electric", "description": "Whether the mode is electric or not", "type": "boolean"}}, "required": ["curves", "default_curve", "is_electric"], "additionalProperties": false}, "EffortCurves": {"title": "EffortCurves", "description": "Effort curves for a given rolling stock.\nThis schema handle multiple modes and conditions such as comfort, power restrictions, etc.", "type": "object", "properties": {"modes": {"title": "Modes", "description": "Map profiles such as '25kV' to comfort effort curves", "type": "object", "additionalProperties": {"$ref": "#/definitions/ModeEffortCurves"}}, "default_mode": {"title": "Default Mode", "description": "The default profile to use", "type": "string"}}, "required": ["modes", "default_mode"], "additionalProperties": false}, "PowerRestrictions": {"title": "PowerRestrictions", "type": "object", "additionalProperties": {"type": "string"}}, "GammaType": {"title": "GammaType", "description": "An enumeration.", "enum": ["CONST", "MAX"], "type": "string"}, "Gamma": {"title": "Gamma", "type": "object", "properties": {"type": {"$ref": "#/definitions/GammaType"}, "value": {"title": "Value", "exclusiveMinimum": 0, "type": "number"}}, "required": ["type", "value"], "additionalProperties": false}, "RollingResistance": {"title": "RollingResistance", "type": "object", "properties": {"type": {"title": "Type", "enum": ["davis"], "type": "string"}, "A": {"title": "A", "minimum": 0, "type": "number"}, "B": {"title": "B", "minimum": 0, "type": "number"}, "C": {"title": "C", "minimum": 0, "type": "number"}}, "required": ["type", "A", "B", "C"], "additionalProperties": false}, "LoadingGaugeType": {"title": "LoadingGaugeType", "description": "This class allows to know the category of the loading gauge.", "enum": ["G1", "G2", "GA", "GB", "GB1", "GC", "FR3.3", "FR3.3/GB/G2", "GLOTT"], "type": "string"}, "SpeedDependantPower": {"title": "SpeedDependantPower", "description": "A curve that account for speed-related power (output/availability) behavior of specific energy sources,\n- the pantograph power is lowered at low speed to avoid welding the pantograph to the catenary\n- the power outputted by Hydrogen fuel cells increases with speed", "type": "object", "properties": {"speeds": {"title": "Speeds", "description": "speed values", "minItems": 1, "type": "array", "items": {"type": "number", "minimum": 0}}, "powers": {"title": "Powers", "description": "power values", "minItems": 1, "type": "array", "items": {"type": "number", "minimum": 0}}}, "required": ["speeds", "powers"], "additionalProperties": false}, "Catenary": {"title": "Catenary", "description": "Catenary used when simulating qualesi trains", "type": "object", "properties": {"energy_source_type": {"title": "Energy Source Type", "default": "Catenary", "enum": ["Catenary"], "type": "string"}, "max_input_power": {"$ref": "#/definitions/SpeedDependantPower"}, "max_output_power": {"$ref": "#/definitions/SpeedDependantPower"}, "efficiency": {"title": "Efficiency", "description": "Efficiency of the catenary / pantograph transmission", "minimum": 0, "maximum": 1, "type": "number"}}, "required": ["max_input_power", "max_output_power", "efficiency"], "additionalProperties": false}, "RefillLaw": {"title": "RefillLaw", "description": "The EnergyStorage refilling behavior", "type": "object", "properties": {"tau": {"title": "Tau", "description": "Time constant of the refill behavior (in seconds)", "minimum": 0, "type": "number"}, "soc_ref": {"title": "Soc Ref", "description": "Reference (target) value of state of charge", "minimum": 0, "maximum": 1, "type": "number"}}, "required": ["tau", "soc_ref"], "additionalProperties": false}, "EnergyStorage": {"title": "EnergyStorage", "description": "If the EnergySource is capable of storing some energy", "type": "object", "properties": {"capacity": {"title": "Capacity", "description": "How much energy the source can store (in Joules)", "minimum": 0, "type": "number"}, "soc": {"title": "Soc", "description": "The state of charge, SoC\u00b7capacity = actual stock of energy", "minimum": 0, "maximum": 1, "type": "number"}, "soc_min": {"title": "Soc Min", "description": "The minimum SoC, where the available energy is zero", "minimum": 0, "maximum": 1, "type": "number"}, "soc_max": {"title": "Soc Max", "description": "The maximum SoC, where the available energy is capacity", "minimum": 0, "maximum": 1, "type": "number"}, "refill_law": {"$ref": "#/definitions/RefillLaw"}}, "required": ["capacity", "soc", "soc_min", "soc_max"], "additionalProperties": false}, "PowerPack": {"title": "PowerPack", "description": "Power pack, either diesel or hydrogen, used when simulating qualesi trains", "type": "object", "properties": {"energy_source_type": {"title": "Energy Source Type", "default": "PowerPack", "enum": ["PowerPack"], "type": "string"}, "max_input_power": {"$ref": "#/definitions/SpeedDependantPower"}, "max_output_power": {"$ref": "#/definitions/SpeedDependantPower"}, "energy_storage": {"$ref": "#/definitions/EnergyStorage"}, "efficiency": {"title": "Efficiency", "description": "Efficiency of the power pack", "minimum": 0, "maximum": 1, "type": "number"}}, "required": ["max_input_power", "max_output_power", "energy_storage", "efficiency"], "additionalProperties": false}, "Battery": {"title": "Battery", "description": "Battery used when simulating qualesi trains", "type": "object", "properties": {"energy_source_type": {"title": "Energy Source Type", "default": "Battery", "enum": ["Battery"], "type": "string"}, "max_input_power": {"$ref": "#/definitions/SpeedDependantPower"}, "max_output_power": {"$ref": "#/definitions/SpeedDependantPower"}, "energy_storage": {"$ref": "#/definitions/EnergyStorage"}, "efficiency": {"title": "Efficiency", "description": "Efficiency of the battery", "minimum": 0, "maximum": 1, "type": "number"}}, "required": ["max_input_power", "max_output_power", "energy_storage", "efficiency"], "additionalProperties": false}, "EnergySource": {"title": "EnergySource", "description": "Energy sources used when simulating qualesi trains", "discriminator": {"propertyName": "energy_source_type", "mapping": {"Catenary": "#/definitions/Catenary", "PowerPack": "#/definitions/PowerPack", "Battery": "#/definitions/Battery"}}, "oneOf": [{"$ref": "#/definitions/Catenary"}, {"$ref": "#/definitions/PowerPack"}, {"$ref": "#/definitions/Battery"}], "additionalProperties": false}}}
